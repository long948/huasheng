(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d21dd1ae"],{3758:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-form",{staticClass:"query-form",attrs:{inline:!0,model:t.query,size:"mini"}},[n("el-form-item",[n("el-button-group",[n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.onReset}})],1)],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list}},[n("el-table-column",{attrs:{label:"设备",prop:"device"}}),t._v(" "),n("el-table-column",{attrs:{label:"版本",prop:"version"}}),t._v(" "),n("el-table-column",{attrs:{label:"版本类型",prop:"version_type"}}),t._v(" "),n("el-table-column",{attrs:{label:"类型",prop:"type"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return t.handleForm(e.$index,e.row)}}},[t._v("编辑\n        ")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return t.handleDel(e.$index,e.row)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{"page-size":t.query.limit,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:t.formMap[t.formName],visible:t.formVisible,"before-close":t.hideForm,width:"85%",top:"5vh"},on:{"update:visible":function(e){t.formVisible=e}}},[n("el-form",{ref:"dataForm",attrs:{model:t.formData,rules:t.formRules}},[n("el-form-item",{attrs:{label:"设备","label-width":"100px"}},[n("el-select",{attrs:{disabled:"",placeholder:"请选择"},model:{value:t.formData.device,callback:function(e){t.$set(t.formData,"device",e)},expression:"formData.device"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"上传版本","label-width":"100px"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://up-z2.qiniup.com","show-file-list":!1,"on-success":t.handleAvatarSuccess,data:{token:t.qiniu.Token}}},[n("span",{staticStyle:{color:"red"}},[t._v(" 点击更换")])])],1),t._v(" "),n("el-form-item",{attrs:{label:"下载地址","label-width":"100px"}},[n("el-input",{model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"版本","label-width":"100px"}},[n("el-input",{model:{value:t.formData.version,callback:function(e){t.$set(t.formData,"version",e)},expression:"formData.version"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"版本类型","label-width":"100px"}},[n("el-input",{model:{value:t.formData.version_type,callback:function(e){t.$set(t.formData,"version_type",e)},expression:"formData.version_type"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"类型","label-width":"100px"}},[n("el-input",{model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"强制更新","label-width":"100px"}},[n("el-radio-group",{model:{value:t.formData.must,callback:function(e){t.$set(t.formData,"must",e)},expression:"formData.must"}},[n("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(e){return t.hideForm(e)}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",loading:t.formLoading},nativeOn:{click:function(e){return t.formSubmit()}}},[t._v("提交")])],1)],1)],1)},i=[],r=n("da71"),o=n("de81"),l={},s={data:function(){return{query:{title:"",page:1,limit:20},qiniu:{},options:[{value:"android",label:"android"},{value:"ios",label:"ios"}],value:"",list:[],total:0,loading:!0,index:null,isEdit:null,formName:null,formMap:{add:"新增",edit:"编辑"},formLoading:!1,formVisible:!1,formData:l,formRules:{problem_title:[{required:!0,help:"请输入相关问题",trigger:"blur"}],problem_content:[{required:!0,help:"请输入相关回答",trigger:"blur"}]},deleteLoading:!1,langList:[]}},mounted:function(){},created:function(){var t=this.$route.query;this.query=Object.assign(this.query,t),this.query.limit=parseInt(this.query.limit),this.getList(),this.qiniuGet()},methods:{onReset:function(){this.$router.push({path:""}),this.query={typeTypeId:"",type_name:"",status:"",page:1,limit:20},this.getList()},handleAvatarSuccess:function(t,e){this.url=URL.createObjectURL(e.raw),this.formData.url=this.qiniu.Domain+t.key},onSubmit:function(){this.query.page=1,this.$router.push({path:"",query:this.query}),this.getList()},handleCurrentChange:function(t){this.query.page=t,this.getList()},qiniuGet:function(){var t=this;Object(o["c"])().then((function(e){t.qiniu=e.data,console.log(e.data)}))},getList:function(){var t=this;this.loading=!0,Object(r["d"])(this.query).then((function(e){t.loading=!1,t.list=e.data.list||[],t.total=e.data.total||0})).catch((function(){t.loading=!1,t.list=[],t.total=0,t.roles=[]}))},resetForm:function(){this.$refs["dataForm"]&&(this.$refs["dataForm"].clearValidate(),this.$refs["dataForm"].resetFields())},hideForm:function(){return this.formVisible=!this.formVisible,this.$refs["dataForm"].resetFields(),this.index=null,!0},handleForm:function(t,e){this.formVisible=!0,this.formData=JSON.parse(JSON.stringify(l)),null!==e&&(this.formData=JSON.parse(JSON.stringify(e))),this.formName="add",this.formRules=this.addRules,this.isEdit=0,null!==t&&(this.isEdit=1,this.index=t,this.formName="edit")},formSubmit:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){t.formLoading=!0;var n=Object.assign({},t.formData);Object(r["j"])(n,t.formName).then((function(e){t.formLoading=!1,t.$message.success("操作成功"),t.formVisible=!1,t.getList()})).catch((function(){t.formLoading=!1}))}}))}}},u=s,c=(n("a6d5"),n("2877")),d=Object(c["a"])(u,a,i,!1,null,null,null);e["default"]=d.exports},"48f2":function(t,e,n){},a6d5:function(t,e,n){"use strict";n("48f2")},da71:function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"k",(function(){return r})),n.d(e,"i",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return s})),n.d(e,"j",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"l",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return m})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return h}));var a=n("b775");function i(t){return Object(a["a"])({url:"/config/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/config/updateAddQiniu",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/system/systemList",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/system/close",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/config/appList",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/config/updateAddAppVersion",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/config/share",method:"get",params:t})}function d(t){return Object(a["a"])({url:"/config/updateShare",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/config/GiveSettingList",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/config/GiveSetting",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/config/downloadLink",method:"get",params:t})}function h(t){return Object(a["a"])({url:"/config/downloadLinkEdit",method:"post",data:t})}},de81:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l}));n("3b2b"),n("a481"),n("6b54");var a=n("b775");function i(t){return Object(a["a"])({url:"qiniu-token",method:"get",params:t})}function r(){return Object(a["a"])({url:"/upload/getToken",method:"get"})}function o(t,e){return Object(a["a"])({url:t,method:"post",data:e})}function l(t,e){if(!e)return"";var n=new Date;n.setTime(1e3*e);var a=n.getMonth()+1,i=n.getDate(),r=n.getHours(),o=n.getMinutes(),l=n.getSeconds(),s={Y:n.getFullYear(),m:1===a.toString().length?"0"+a:a,d:1===i.toString().length?"0"+i:i,H:1===r.toString().length?"0"+r:r,i:1===o.toString().length?"0"+o:o,s:1===l.toString().length?"0"+l:l};for(var u in s)t=t.replace(new RegExp(u),s[u]);return t}}}]);
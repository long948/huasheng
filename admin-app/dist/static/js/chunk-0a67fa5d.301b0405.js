(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a67fa5d"],{"07ce":function(t,e,a){"use strict";a("6ff9")},4381:function(t,e,a){"use strict";a("6762"),a("2fdb");var i=a("4360"),r={inserted:function(t,e,a){var r=e.value,n=i["a"].getters&&i["a"].getters.roles;if(!(r&&r instanceof Array&&r.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var o=r;if("*"!=n){var l=n.some((function(t){return o.includes(t)}));l||t.parentNode&&t.parentNode.removeChild(t)}}},n=function(t){t.directive("permission",r)};window.Vue&&(window["permission"]=r,Vue.use(n)),r.install=n;e["a"]=r},6103:function(t,e,a){"use strict";a.d(e,"h",(function(){return r})),a.d(e,"e",(function(){return n})),a.d(e,"m",(function(){return o})),a.d(e,"j",(function(){return l})),a.d(e,"k",(function(){return s})),a.d(e,"l",(function(){return u})),a.d(e,"p",(function(){return c})),a.d(e,"i",(function(){return d})),a.d(e,"o",(function(){return m})),a.d(e,"n",(function(){return f})),a.d(e,"q",(function(){return p})),a.d(e,"r",(function(){return h})),a.d(e,"s",(function(){return v})),a.d(e,"f",(function(){return g})),a.d(e,"g",(function(){return _})),a.d(e,"a",(function(){return b})),a.d(e,"b",(function(){return w})),a.d(e,"d",(function(){return y})),a.d(e,"c",(function(){return D}));var i=a("b775");function r(t){return Object(i["a"])({url:"/miner/miner_level",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/miner/miner_levelEdit",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/miner/miner_saplingType",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/shop/sapling_package",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/miner/sapling_packageDel",method:"post",data:t})}function u(t,e){var a="edit"===e?"/shop/sapling_packageEdit":"/shop/sapling_packageAdd";return Object(i["a"])({url:a,method:"post",data:t})}function c(t){return Object(i["a"])({url:"/miner/sapling_share_reward",method:"get",params:t})}function d(t,e){var a="edit"===e?"/miner/sapling_share_rewardEdit":"/miner/sapling_share_rewardAdd";return Object(i["a"])({url:a,method:"post",data:t})}function m(t){return Object(i["a"])({url:"/miner/sapling_share_rewardDel",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/members/user_sapling_release",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/shop/user_sapling",method:"get",params:t})}function h(t){return Object(i["a"])({url:"/shop/user_saplingEdit",method:"post",data:t})}function v(t){return Object(i["a"])({url:"/miner/user_sapling_receive",method:"get",params:t})}function g(t){return Object(i["a"])({url:"/miner/miner_dividend",method:"get",params:t})}function _(t,e){var a="edit"===e?"/miner/miner_dividendEdit":"/miner/miner_dividendAdd";return Object(i["a"])({url:a,method:"post",data:t})}function b(t){return Object(i["a"])({url:"/shop/dog_list",method:"get",params:t})}function w(t,e){var a="/shop/dog_edit";return Object(i["a"])({url:a,method:"post",data:t})}function y(t){return Object(i["a"])({url:"/shop/user_dog_list",method:"get",params:t})}function D(t){return Object(i["a"])({url:"/shop/user_dog_del",method:"post",data:t})}},6724:function(t,e,a){"use strict";a("8d41");var i="@@wavesContext";function r(t,e){function a(a){var i=Object.assign({},e.value),r=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),n=r.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var o=n.getBoundingClientRect(),l=n.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(o.width,o.height)+"px",n.appendChild(l)),r.type){case"center":l.style.top=o.height/2-l.offsetHeight/2+"px",l.style.left=o.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-o.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-o.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=r.color,l.className="waves-ripple z-active",!1}}return t[i]?t[i].removeHandle=a:t[i]={removeHandle:a},a}var n={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[i].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[i].removeHandle,!1),t[i]=null,delete t[i]}},o=function(t){t.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(o)),n.install=o;e["a"]=n},"6ff9":function(t,e,a){},"75ce":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"query-form",attrs:{inline:!0,model:t.query,size:"mini"}},[a("el-form-item",[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.onReset}})],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center",width:"100px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"level",align:"center",label:"等级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",align:"center",label:"等级名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"图标",align:"center","label-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.icon?a("span",[a("img",{directives:[{name:"image-preview",rawName:"v-image-preview"}],attrs:{src:t.qiniu.Domain+e.row.icon,width:"50px"}})]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"190px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){return t.handleForm(e.$index,e.row)}}},[t._v("详情\n        ")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"page-size":t.query.limit,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:t.formMap[t.formName],visible:t.formVisible,"before-close":t.hideForm,width:"50%",top:"5vh"},on:{"update:visible":function(e){t.formVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.formData}},[a("el-form-item",{attrs:{label:"等级名称：","label-width":"110px"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"等级：","label-width":"110px"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{disabled:"true"},model:{value:t.formData.level,callback:function(e){t.$set(t.formData,"level",e)},expression:"formData.level"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图标","label-width":"100px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://up-z2.qiniup.com","show-file-list":!1,"on-success":t.handleAvatarSuccess,data:{token:t.qiniu.Token}}},[t._v("\n          点击更换\n          "),t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v("    \n        "),a("a",{attrs:{target:"_blank",href:t.imageUrl}},[a("span",{staticStyle:{color:"red"}},[t._v("点击查看图标")])])],1),t._v(" "),a("hr",{attrs:{color:"#E5E5E5"}}),t._v(" "),a("h3",[t._v("升级规则：")]),t._v(" "),a("el-form-item",{attrs:{label:"直推人数：",prop:"direct_push","label-width":"110px"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.formData.direct_push,callback:function(e){t.$set(t.formData,"direct_push",e)},expression:"formData.direct_push"}}),t._v(" "),a("label",{staticStyle:{"margin-left":"60px"}},[t._v("代数：")]),t._v(" "),a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.formData.algebra,callback:function(e){t.$set(t.formData,"algebra",e)},expression:"formData.algebra"}})],1),t._v(" "),a("el-form-item",[a("label",{staticStyle:{"margin-left":"63px"}},[t._v("等级：")]),t._v(" "),a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.formData.level_id,callback:function(e){t.$set(t.formData,"level_id",e)},expression:"formData.level_id"}}),t._v(" "),a("label",{staticStyle:{"margin-left":"60px"}},[t._v("亩数：")]),t._v(" "),a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.formData.computing_power,callback:function(e){t.$set(t.formData,"computing_power",e)},expression:"formData.computing_power"}})],1),t._v(" "),a("el-alert",{attrs:{title:"例如：百户侯升级规则：直推10人（直推人数输入框），6代（代数输入框）内亩数达到100亩（亩数），直推中有2个升级到金主（等级处输入对应等级如金主等级位2就输入2）",type:"error"}}),t._v(" "),a("hr",{attrs:{color:"#E5E5E5"}}),t._v(" "),1!=t.formData.level&&2!=t.formData.level?a("h3",[t._v("奖励规则:")]):t._e(),t._v(" "),1!=t.formData.level&&2!=t.formData.level?a("el-form-item",{attrs:{label:"奖励树苗：","label-width":"110px"}},[a("el-select",{staticStyle:{width:"24%"},attrs:{placeholder:"树苗名称"},model:{value:t.formData.sapling_id,callback:function(e){t.$set(t.formData,"sapling_id",e)},expression:"formData.sapling_id"}},t._l(t.SaplingList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.nickname,value:t.nickname}})})),1),t._v("\n           \n        ")],1):t._e(),t._v(" "),a("el-form-item",{attrs:{"label-width":"110px",label:"是否需要审核：",prop:"is_audit"}},[a("el-radio-group",{model:{value:t.formData.is_audit,callback:function(e){t.$set(t.formData,"is_audit",e)},expression:"formData.is_audit"}},[a("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("是")])],1),t._v("\n             \n        ")],1),t._v(" "),a("hr",{attrs:{color:"#E5E5E5"}}),t._v(" "),a("h3",[t._v("详情：")]),t._v(" "),a("el-form-item",{attrs:{label:"创建时间:",prop:"create_time"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{disabled:"true","auto-complete":"off"},model:{value:t.formData.create_time,callback:function(e){t.$set(t.formData,"create_time",e)},expression:"formData.create_time"}}),t._v(" "),a("label",[t._v("更新时间：")]),t._v(" "),a("el-input",{staticStyle:{width:"30%"},attrs:{disabled:"true","auto-complete":"off"},model:{value:t.formData.update_time,callback:function(e){t.$set(t.formData,"update_time",e)},expression:"formData.update_time"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){return t.hideForm(e)}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleEdit}},[t._v("确 定")])],1)],1)],1)},r=[],n=a("6103"),o=a("6724"),l=a("4381"),s=a("de81"),u={id:"",level:"",nickname:"",icon:"",rule:"",dividend_ratio:"",reward:"",is_pop_up:"",is_audit:"",is_delete:"",create_time:"",update_time:"",imageUrl:"",sapling_id:"",delete_time:""},c={directives:{waves:o["a"],permission:l["a"]},data:function(){return{query:{id:"",page:1,limit:20},list:[],total:0,loading:!0,index:null,isEdit:null,formName:null,formMap:{add:"新增",edit:"等级配置"},qiniu:{},imageUrl:"",formLoading:!1,formVisible:!1,formData:u,deleteLoading:!1,langList:[],SaplingList:[]}},mounted:function(){},created:function(){var t=this.$route.query;this.query=Object.assign(this.query,t),this.query.limit=parseInt(this.query.limit),this.getList(),this.qiniuGet()},methods:{onReset:function(){this.$router.push({path:""}),this.query={id:"",page:1,limit:20},this.getList()},qiniuGet:function(){var t=this;Object(s["c"])().then((function(e){t.qiniu=e.data,console.log(e.data)}))},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),this.formData.icon=t.key},onSubmit:function(){this.query.page=1,this.$router.push({path:"",query:this.query}),this.getList()},handleCurrentChange:function(t){this.query.page=t,this.getList()},getList:function(){var t=this;this.loading=!0,Object(n["h"])(this.query).then((function(e){t.loading=!1,t.list=e.data.list||[],t.total=e.data.total||0,t.SaplingList=e.data.SaplingList||[]})).catch((function(){t.loading=!1,t.list=[],t.total=0,t.roles=[]}))},handleEdit:function(){var t=this;Object(n["e"])(this.formData).then((function(e){2e4===e.code&&(t.$message({message:"环保等级已更新",type:"success"}),t.getList(),t.formVisible=!1)}))},resetForm:function(){this.$refs["dataForm"]&&(this.$refs["dataForm"].clearValidate(),this.$refs["dataForm"].resetFields())},hideForm:function(){return this.formVisible=!this.formVisible,this.$refs["dataForm"].resetFields(),this.index=null,!0},handleForm:function(t,e){this.imageUrl=this.qiniu.Domain+e.icon,this.formVisible=!0,this.formData=JSON.parse(JSON.stringify(u)),null!==e&&(this.formData=JSON.parse(JSON.stringify(e))),this.formName="add",this.isEdit=0,null!==t&&(this.isEdit=1,this.index=t,this.formName="edit")}}},d=c,m=(a("07ce"),a("2877")),f=Object(m["a"])(d,i,r,!1,null,null,null);e["default"]=f.exports},"8d41":function(t,e,a){},de81:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return l}));a("3b2b"),a("a481"),a("6b54");var i=a("b775");function r(t){return Object(i["a"])({url:"qiniu-token",method:"get",params:t})}function n(){return Object(i["a"])({url:"/upload/getToken",method:"get"})}function o(t,e){return Object(i["a"])({url:t,method:"post",data:e})}function l(t,e){if(!e)return"";var a=new Date;a.setTime(1e3*e);var i=a.getMonth()+1,r=a.getDate(),n=a.getHours(),o=a.getMinutes(),l=a.getSeconds(),s={Y:a.getFullYear(),m:1===i.toString().length?"0"+i:i,d:1===r.toString().length?"0"+r:r,H:1===n.toString().length?"0"+n:n,i:1===o.toString().length?"0"+o:o,s:1===l.toString().length?"0"+l:l};for(var u in s)t=t.replace(new RegExp(u),s[u]);return t}}}]);
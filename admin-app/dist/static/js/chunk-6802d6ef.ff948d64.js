(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6802d6ef"],{"0bf9":function(e,t,c){"use strict";c.r(t);var s=function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"m-l-50 m-t-30 w-900"},[c("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px"}},[c("el-form-item",{attrs:{label:"用户组名称",prop:"Name"}},[c("el-input",{staticClass:"h-40 w-200",attrs:{placeholder:"请提供用户组名称"},model:{value:e.form.Name,callback:function(t){e.$set(e.form,"Name","string"===typeof t?t.trim():t)},expression:"form.Name"}})],1),e._v(" "),c("el-form-item",{attrs:{label:"状态"}},[c("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.IsClose,callback:function(t){e.$set(e.form,"IsClose",t)},expression:"form.IsClose"}},[c("el-option",{attrs:{label:"禁用",value:"1"}}),e._v(" "),c("el-option",{attrs:{label:"启用",value:"0"}})],1)],1),e._v(" "),c("el-form-item",{attrs:{label:"权限分配"}},[c("div",{staticClass:"bor-gray h-400 ovf-y-auto bor-ra-5 bg-wh"},e._l(e.nodes,(function(t){return c("div",[c("div",{staticClass:"bor-b-ccc bg-gra p-l-10 p-r-10"},[c("el-checkbox",{on:{change:function(c){return e.selectProjectRule(t)}},model:{value:t.check,callback:function(c){e.$set(t,"check",c)},expression:"item.check"}},[e._v(e._s(t.else))])],1),e._v(" "),e._l(t.Child,(function(s){return c("div",[c("div",{staticClass:"p-l-20 bor-b-ccc"},[c("el-checkbox",{on:{change:function(c){return e.selectModuleRule(s,t,s.Child)}},model:{value:s.check,callback:function(t){e.$set(s,"check",t)},expression:"childItem.check"}},[e._v(e._s(s.else))])],1),e._v(" "),c("div",{staticClass:"p-l-40 bor-b-ccc bg-gra"},e._l(s.Child,(function(n,o){return c("el-checkbox",{key:o,on:{change:function(c){return e.selectActionRule(n,s,t)}},model:{value:n.check,callback:function(t){e.$set(n,"check",t)},expression:"grandChildItem.check"}},[e._v(e._s(n.else))])})),1)])}))],2)})),0)]),e._v(" "),c("el-form-item",[c("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add("form")}}},[e._v("提交")]),e._v(" "),c("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)],1)},n=[],o=(c("a481"),c("7f7f"),c("ac6a"),c("96cf"),c("1da1")),r=(c("aede"),c("3aff"),c("34c6")),l={data:function(){return{isLoading:!1,form:{Name:"",IsClose:""},nodes:[],selectedNodes:[]}},methods:{add:function(e){var t=this,c={Name:this.form.Name,IsClose:this.form.IsClose,Rules:this.selectedNodes};Object(r["a"])(c).then((function(e){t.$message({message:"已新建权限组",type:"success"}),t.closeTag()}))},getRules:function(){return new Promise((function(e,t){Object(r["h"])({type:"tree"}).then((function(t){e(t.data)}))}))},getGroupInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRules();case 2:t=e.sent,this.nodes=this.nodes.concat(t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectProjectRule:function(e){var t=this;console.log(e),e.check||_(e.Child).forEach((function(e){e.check=!1;var c=_(t.selectedNodes).indexOf(e.Id);t.selectedNodes.splice(c,1),_(e.Child).forEach((function(e){e.check=!1;var c=_(t.selectedNodes).indexOf(e.Id);t.selectedNodes.splice(c,1)}))})),this.selectRule(e)},selectModuleRule:function(e,t,c){var s=this;if(t.check||(t.check=!0,this.selectedNodes.push(t.Id)),e.check)this.selectedNodes.push(e.Id),_(c).forEach((function(e){e.check=!0,s.selectedNodes.push(e.Id)}));else{var n=_(this.selectedNodes).indexOf(e.Id);this.selectedNodes.splice(n,1),_(c).forEach((function(e){var t=_(s.selectedNodes).indexOf(e.Id);t>=0&&(e.check=!1,s.selectedNodes.splice(t,1))}))}},selectActionRule:function(e,t,c){t.check||(t.check=!0,this.selectedNodes.push(t.Id)),c.check||(c.check=!0,this.selectedNodes.push(c.Id)),this.selectRule(e)},selectRule:function(e){if(e.check)this.selectedNodes.push(e.Id);else{var t=_(this.selectedNodes).indexOf(e.Id);this.selectedNodes.splice(t,1)}},closeTag:function(){var e=this,t=this.$route.name,c=this.$store.state.tagsView.visitedViews;for(var s in c)c[s].name==t&&this.$store.dispatch("tagsView/delView",c[s]).then((function(t){var c=t.visitedViews,s=c.slice(-1)[0];s?e.$router.push(s):"Dashboard"===view.name?e.$router.replace({path:"/redirect"+view.fullPath}):e.$router.push("/")}))}},created:function(){this.getGroupInfo()}},i=l,a=c("2877"),u=Object(a["a"])(i,s,n,!1,null,null,null);t["default"]=u.exports},"34c6":function(e,t,c){"use strict";c.d(t,"h",(function(){return n})),c.d(t,"f",(function(){return o})),c.d(t,"b",(function(){return r})),c.d(t,"g",(function(){return l})),c.d(t,"d",(function(){return i})),c.d(t,"a",(function(){return a})),c.d(t,"e",(function(){return u})),c.d(t,"c",(function(){return d}));var s=c("b775");function n(e){return Object(s["a"])({url:"/rule/list",method:"get",params:e})}function o(e){return Object(s["a"])({url:"/rule/edit",method:"post",data:e})}function r(e){return Object(s["a"])({url:"/rule/add",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/rule/group",method:"get",params:e})}function i(e){return Object(s["a"])({url:"/rule/del",method:"post",data:e})}function a(e){return Object(s["a"])({url:"/rule/group/add",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/rule/group/edit",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/rule/group/del",method:"post",data:e})}},"3aff":function(e,t,c){},aede:function(e,t,c){}}]);
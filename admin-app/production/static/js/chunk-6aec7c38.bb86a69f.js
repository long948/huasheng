(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6aec7c38"],{"221b":function(t,e,i){"use strict";var a=i("91ca"),n=i.n(a);n.a},3758:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{staticClass:"query-form",attrs:{inline:!0,model:t.query,size:"mini"}},[i("el-form-item",[i("el-button-group",[i("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:t.onReset}}),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.handleForm(null,null)}}},[t._v("新增")])],1)],1)],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list}},[i("el-table-column",{attrs:{label:"设备",prop:"device"}}),t._v(" "),i("el-table-column",{attrs:{label:"版本",prop:"version"}}),t._v(" "),i("el-table-column",{attrs:{label:"版本类型",prop:"version_type"}}),t._v(" "),i("el-table-column",{attrs:{label:"类型",prop:"type"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return t.handleForm(e.$index,e.row)}}},[t._v("编辑\n        ")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return t.handleDel(e.$index,e.row)}}},[t._v("删除\n        ")])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"page-size":t.query.limit,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),i("el-dialog",{attrs:{title:t.formMap[t.formName],visible:t.formVisible,"before-close":t.hideForm,width:"85%",top:"5vh"},on:{"update:visible":function(e){t.formVisible=e}}},[i("el-form",{ref:"dataForm",attrs:{model:t.formData,rules:t.formRules}},[i("el-form-item",{attrs:{label:"设备","label-width":"100px"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.device,callback:function(e){t.$set(t.formData,"device",e)},expression:"formData.device"}},t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"上传app","label-width":"100px"}},[i("upload",{attrs:{ext:"jpg,png,jpeg"},on:{"on-select":t.onSelectBackground}}),t._v(" "),i("el-input",{attrs:{placeholder:"请上传图片尺寸 750px*1334px"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"下载地址","label-width":"100px"}},[i("el-input",{model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"版本","label-width":"100px"}},[i("el-input",{model:{value:t.formData.version,callback:function(e){t.$set(t.formData,"version",e)},expression:"formData.version"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"版本类型","label-width":"100px"}},[i("el-input",{model:{value:t.formData.version_type,callback:function(e){t.$set(t.formData,"version_type",e)},expression:"formData.version_type"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"类型","label-width":"100px"}},[i("el-input",{model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"强制更新","label-width":"100px"}},[i("el-radio-group",{model:{value:t.formData.must,callback:function(e){t.$set(t.formData,"must",e)},expression:"formData.must"}},[i("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),i("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){return t.hideForm(e)}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.formLoading},nativeOn:{click:function(e){return t.formSubmit()}}},[t._v("提交")])],1)],1)],1)},n=[],r=i("da71"),o=i("de81"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传文件")]),t._v(" "),i("el-dialog",{attrs:{"custom-class":"upload-dialog__body",width:"450px",title:"插入图片",visible:t.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"本地上传",name:"localhost"}},[i("div",{staticClass:"upload-content"},[i("span",{staticClass:"text-muted"},[t._v("只能上传"+t._s(t.ext)+"文件，且大小不超过"+t._s(t._f("renderSize")(t.size))+"，且宽高 "+t._s(t.width?t.width+"px":"不限")+" * "+t._s(t.height?t.height+"px":"不限"))]),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"widget-upload",on:{dragenter:t.onDrag,dragover:t.onDrag,drop:t.onDrop}},[i("input",{ref:"upload",staticClass:"widget-upload__file",attrs:{type:"file",name:"file"},on:{change:t.onChange}}),t._v(" "),i("el-input",{staticClass:"widget-upload__text",attrs:{size:"medium",placeholder:"文件拖拽到这里"},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}),t._v(" "),i("el-button",{attrs:{size:"medium"}},[t._v("选择文件")])],1)])]),t._v(" "),i("el-tab-pane",{attrs:{label:"远程地址获取",name:"network"}},[i("div",{staticClass:"upload-content"},[i("span",{staticClass:"text-muted"},[t._v("只能上传"+t._s(t.ext)+"文件，且大小不超过"+t._s(t._f("renderSize")(t.size))+"，且宽高 "+t._s(t.width?t.width+"px":"不限")+" * "+t._s(t.height?t.height+"px":"不限"))]),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"widget-upload"},[i("el-input",{attrs:{size:"medium",placeholder:"请输入文件所在网址"},model:{value:t.fileUrl,callback:function(e){t.fileUrl=e},expression:"fileUrl"}})],1)])])],1),t._v(" "),i("div",{staticStyle:{"text-align":"right","padding-top":"40px"}},[i("el-button",{attrs:{size:"medium"},on:{click:t.onClose}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{size:"medium",type:"primary",loading:t.uploadLoading},on:{click:t.handleSubmit}},[t._v("插入")])],1)],1)],1)},s=[],u=(i("7f7f"),i("c5f6"),i("8975")),c=(i("a18c"),{name:"Upload",props:{height:{type:Number},width:{type:Number},ext:{type:String},size:{type:Number},color:{type:String,default:"#1890ff"}},data:function(){return{activeName:"localhost",file:null,fileName:"",filePath:"",filePathUrl:"",fileUrl:"",dialogVisible:!1,uploadLoading:!1}},computed:{},watch:{},methods:{onDrag:function(t){t.stopPropagation(),t.preventDefault()},onDrop:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;if(e.length<1)return!1;this.file=e[0],this.fileName=e[0].name},onClose:function(){this.onReset()},onChange:function(t){var e=t.target.files;if(e.length<1)return!1;this.file=e[0],this.fileName=e[0].name,t.target.value=""},onReset:function(){this.activeName="localhost",this.file=null,this.fileName="",this.filePath="",this.filePathUrl="",this.fileUrl="",this.dialogVisible=!1,this.uploadLoading=!1},handleSubmit:function(){var t=this;if("network"===this.activeName)return this.fileUrl?(this.$emit("on-select",this.fileUrl,this.fileUrl),void this.onReset()):void this.$message.error("请输入文件网络地址");if(null!==this.file){var e=this.beforeUpload(this.file);!1!==e&&e.then((function(){t.uploadLoading=!0,Object(o["c"])().then((function(e){var i=e.data.upload_url,a=e.data.domain,n=new FormData;n.append("token",e.data.up_token),n.append("file",t.file),Object(o["a"])(i,n).then((function(e){if(t.uploadLoading=!1,e.key||e.data.key){var i=e.key||e.data.key,n=window.URL||window.webkitURL,r=n.createObjectURL(t.file),o=a+i;return t.$emit("on-select",i,r,o),void t.onReset()}t.$message.error("上传出错")})).catch((function(e){t.uploadLoading=!1,t.$message.error("上传出错")}))})).catch((function(){t.uploadLoading=!1,t.$message.error("出现未知问题，刷新页面")}))})).catch((function(){}))}else this.$message.error("请先选择文件")},beforeUpload:function(t){var e=t.name?t.name:"",i=!e||e.substr(e.lastIndexOf(".")+1,e.length);i=i.toLowerCase();var a=!1;if(this.ext&&(a=this.ext.indexOf(i)>=0,!a))return this.$message.error("文件只能为 "+this.ext+" 格式!"),!1;var n=!1;if(this.size){var r=this.size;if(n=r>0&&t.size>r,n)return this.$message.error("上传文件不能超过 "+Object(u["renderSize"])(r)+"!"),!1}var o=this;return o.width||o.height?new Promise((function(e,i){var a=o.width,n=o.height,r=window.URL||window.webkitURL,l=new Image;l.src=r.createObjectURL(t),l.onload=function(){var t=(!a||l.width===a)&&(!n||l.height===n);if(t)e();else{var r="";a&&!n&&(r=a),n&&!a&&(r=n),n&&a&&(r=a+"*"+n),o.$message.error("上传尺寸必须是 "+r+" px!"),i()}}})):new Promise((function(t){t()}))}}}),d=c,f=(i("221b"),i("2877")),m=Object(f["a"])(d,l,s,!1,null,null,null),h=m.exports,p={},g={components:{Upload:h},data:function(){return{query:{title:"",page:1,limit:20},qiniu:{},options:[{value:"选项1",label:"android"},{value:"选项2",label:"ios"}],value:"",list:[],total:0,loading:!0,index:null,isEdit:null,formName:null,formMap:{add:"新增",edit:"编辑"},formLoading:!1,formVisible:!1,formData:p,formRules:{problem_title:[{required:!0,help:"请输入相关问题",trigger:"blur"}],problem_content:[{required:!0,help:"请输入相关回答",trigger:"blur"}]},deleteLoading:!1,langList:[]}},mounted:function(){},created:function(){var t=this.$route.query;this.query=Object.assign(this.query,t),this.query.limit=parseInt(this.query.limit),this.getList(),this.qiniuGet()},methods:{onReset:function(){this.$router.push({path:""}),this.query={typeTypeId:"",type_name:"",status:"",page:1,limit:20},this.getList()},onSubmit:function(){this.query.page=1,this.$router.push({path:"",query:this.query}),this.getList()},handleCurrentChange:function(t){this.query.page=t,this.getList()},qiniuGet:function(){var t=this;Object(o["c"])().then((function(e){t.qiniu=e.data,console.log(e.data)}))},getList:function(){var t=this;this.loading=!0,Object(r["d"])(this.query).then((function(e){t.loading=!1,t.list=e.data.list||[],t.total=e.data.total||0})).catch((function(){t.loading=!1,t.list=[],t.total=0,t.roles=[]}))},resetForm:function(){this.$refs["dataForm"]&&(this.$refs["dataForm"].clearValidate(),this.$refs["dataForm"].resetFields())},hideForm:function(){return this.formVisible=!this.formVisible,this.$refs["dataForm"].resetFields(),this.index=null,!0},handleForm:function(t,e){this.formVisible=!0,this.formData=JSON.parse(JSON.stringify(p)),null!==e&&(this.formData=JSON.parse(JSON.stringify(e))),this.formName="add",this.formRules=this.addRules,this.isEdit=0,null!==t&&(this.isEdit=1,this.index=t,this.formName="edit")},onSelectBackground:function(t,e,i){this.formData.url=i},handleAvatarSuccess:function(t,e){this.imageUrl=this.qiniu.Domain,this.formData.url=this.qiniu.Domain+t.key}}},v=g,b=Object(f["a"])(v,a,n,!1,null,null,null);e["default"]=b.exports},"91ca":function(t,e,i){},da71:function(t,e,i){"use strict";i.d(e,"e",(function(){return n})),i.d(e,"h",(function(){return r})),i.d(e,"g",(function(){return o})),i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return s})),i.d(e,"f",(function(){return u})),i.d(e,"i",(function(){return c})),i.d(e,"b",(function(){return d})),i.d(e,"a",(function(){return f}));var a=i("b775");function n(t){return Object(a["a"])({url:"/config/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/config/updateAddQiniu",method:"post",data:t})}function o(t){return Object(a["a"])({url:"/system/systemList",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/system/close",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/config/appList",method:"get",params:t})}function u(t){return Object(a["a"])({url:"/config/share",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/config/updateShare",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/config/GiveSettingList",method:"get",params:t})}function f(t){return Object(a["a"])({url:"/config/GiveSetting",method:"post",data:t})}},de81:function(t,e,i){"use strict";i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return o}));i("3b2b"),i("a481"),i("6b54");var a=i("b775");function n(t){return Object(a["a"])({url:"qiniu-token",method:"get",params:t})}function r(t,e){return Object(a["a"])({url:t,method:"post",data:e})}function o(t,e){if(!e)return"";var i=new Date;i.setTime(1e3*e);var a=i.getMonth()+1,n=i.getDate(),r=i.getHours(),o=i.getMinutes(),l=i.getSeconds(),s={Y:i.getFullYear(),m:1==a.toString().length?"0"+a:a,d:1==n.toString().length?"0"+n:n,H:1==r.toString().length?"0"+r:r,i:1==o.toString().length?"0"+o:o,s:1==l.toString().length?"0"+l:l};for(var u in s)t=t.replace(new RegExp(u),s[u]);return t}}}]);